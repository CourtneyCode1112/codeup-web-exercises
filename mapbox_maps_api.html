<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Mapbox Maps API</title>
    <!-- Mapbox CSS -->
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.css' rel='stylesheet' />
    <!-- Mapbox JS -->
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.js'></script>
    <!-- Mapbox Geocoder Util Methods -->
    <script src="js/mapbox-geocoder-utils.js"></script>
    <!---- link keys ---->
    <script src="js/keys.js"></script>
    <!-- Custom CSS -->
    <style>
        #map {
            /* the width and height may be set to any size */
            width: 95%;
            height: 600px;
            margin: 0 auto;
        }
        #fly1, #fly2, #fly3 {
            display: inline-block;
            position: relative;
            margin: 10px 10px;
            width: 20%;
            height: 35px;
            padding: 10px;
            border: none;
            border-radius: 3px;
            font-size: 12px;
            text-align: center;
            color: #fff;
            background: #ee8a65;
        }
        #flyBox {
            text-align: center;
        }
        #blissImg {
            width: 300px;
            height: 120px;
        }
        #stationImg {
            width: 180px;
            height: 180px;
        }
        #nanaImg {
            width: 250px;
            height: 300px;
        }
    </style>
</head>
<body>

<h1>My First Mapbox Map!</h1>
<section id="flyBox">
    <button id="fly1">Restaurant #1</button>
    <button id="fly2">Restaurant #2</button>
    <button id="fly3">Restaurant #3</button>
</section>
<br />
<!-- The HTML element that serves as the Mapbox container -->
<div id='map'></div>


<!-- Custom JS -->
<script>

    mapboxgl.accessToken = MAPBOX_TOKEN;
    var start = [-98.486990, 29.411230];
    var end = [-98.486990, 29.411230];
    var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/streets-v11',
        center: start,
        zoom: 12.5
    });

    var isAtStart = true;
    var start2 = [-98.490490, 29.417260];
    var end2 = [-98.490490, 29.417260];
    var start3 = [-98.490490, 29.417260];
    var end3 = [-97.958290, 26.151080];

    document.getElementById('fly1').addEventListener('click', function() {
// depending on whether we're currently at point a or b, aim for
// point a or b
        var target = isAtStart ? end : start;

// and now we're at the opposite point
        isAtStart = !isAtStart;

        map.flyTo({
// These options control the ending camera position: centered at
// the target, at zoom level 9, and north up.
            center: target,
            zoom: 18,
            bearing: 0,

// These options control the flight curve, making it move
// slowly and zoom out almost completely before starting
// to pan.
            speed: 0.5, // make the flying slow
            curve: 3, // change the speed at which it zooms out

// This can be any easing function: it takes a number between
// 0 and 1 and returns another number between 0 and 1.
            easing: function(t) {
                return t;
            },

// this animation is considered essential with respect to prefers-reduced-motion
            essential: true
        });
    });
//------------------------------------------------------
    document.getElementById('fly2').addEventListener('click', function() {

        var target = isAtStart ? end2 : start2;

        isAtStart = !isAtStart;

        map.flyTo({
            center: target,
            zoom: 18,
            bearing: 0,

            speed: 0.5, // make the flying slow
            curve: 3, // change the speed at which it zooms out

            easing: function(t) {
                return t;
            },

            essential: true
        });
    });
//------------------------------------------------------
    //------------------------------------------------------
    document.getElementById('fly3').addEventListener('click', function() {

        var target = isAtStart ? end3 : start3;

        isAtStart = !isAtStart;

        map.flyTo({
            center: target,
            zoom: 18,
            bearing: 0,

            speed: 0.5, // make the flying slow
            curve: 3, // change the speed at which it zooms out

            easing: function(t) {
                return t;
            },

            essential: true
        });
    });
//------------------------------------------------------

    map.on('load', function() {
        map.setPaintProperty('building', 'fill-color', [
            'interpolate',
            ['exponential', 0.5],
            ['zoom'],
            17,
            '#f8cda0',
            22,
            '#f58900'
        ]);

        map.setPaintProperty('building', 'fill-opacity', [
            'interpolate',
            ['exponential', 0.5],
            ['zoom'],
            15,
            0,
            22,
            1
        ]);
    });


//-----------------------------------------

    map.on('load', function() {
// Add an image to use as a custom marker
        map.loadImage(
            'https://docs.mapbox.com/mapbox-gl-js/assets/custom_marker.png',
            function(error, image) {
                if (error) throw error;
                map.addImage('custom-marker', image);
// Add a GeoJSON source with a point.
                map.addSource('points', {
                    'type': 'geojson',
                    'data': {
                        'type': 'FeatureCollection',
                        'features': [
                            {
                                'type': 'Feature',
                                'id': 'restOne',
                                'properties': {},
                                'geometry': {
                                    'type': 'Point',
                                    'coordinates': [
                                        -98.486990,
                                         29.411230
                                    ]
                                }
                            },
                            {
                                'type': 'Feature',
                                'id': 'restTwo',
                                'properties': {},
                                'geometry': {
                                    'type': 'Point',
                                    'coordinates': [
                                        -98.490490,
                                        29.417260
                                    ]
                                }
                            },
                            {
                                'type': 'Feature',
                                'properties': {},
                                'geometry': {
                                    'type': 'Point',
                                    'coordinates': [
                                        -97.958290,
                                        26.151080
                                    ]
                                }
                            },

                        ]
                    }
                });

// Add a symbol layer
                map.addLayer({
                    'id': 'symbols',
                    'type': 'symbol',
                    'source': 'points',
                    'layout': {
                        'icon-image': 'custom-marker'
                    }
                });
            }
        );

// Center the map on the coordinates of any clicked symbol from the 'symbols' layer.
        map.on('click', 'symbols', function(e) {
            map.flyTo({
                center: e.features[0].geometry.coordinates
            });
        });
        map.on('click', 'symbols', function (e){
            var popup = new mapboxgl.Popup()
                .setLngLat([-98.486990, 29.411230])
                .setHTML("<strong>Bliss</strong><br><img id='blissImg' src='Img/bliss.jpg'>")
                .addTo(map)
        })
        map.on('click', 'symbols', function (){
            var popup2 = new mapboxgl.Popup()
                .setLngLat([-98.490490, 29.417260])
                .setHTML("<strong>Station Cafe</strong><br> <img id='stationImg'src='Img/station-cafe-sand.jpg'>")
                .addTo(map)
        })
        map.on('click', 'symbols', function (){
            var popup3 = new mapboxgl.Popup()
                .setLngLat([-97.958290, 26.151080])
                .setHTML("<strong>Nana's Taqueria</strong><br> <img id='nanaImg'src='Img/nanaImg.jpg'>")
                .addTo(map)
        })

// Change the cursor to a pointer when the it enters a feature in the 'symbols' layer.
        map.on('mouseenter', 'symbols', function() {
            map.getCanvas().style.cursor = 'pointer';
        });

// Change it back to a pointer when it leaves.
        map.on('mouseleave', 'symbols', function() {
            map.getCanvas().style.cursor = '';
        });
    });


</script>


</body>
</html>